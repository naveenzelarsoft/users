pipeline {
  agent any

    tools {
                 maven 'mvn3.6.3'
                 jdk 'jdk1.8'
             }
    stages {

      stage ('Build Project'){
       steps {
       sh '''
          mvn clean package
          '''
       }
      }
      stage ('Prepare Artifacts') {
        steps {
          sh '''
            cp target/users-api-0.0.1.jar users.jar
            zip -r users.zip users.jar
          '''
          }
        }
     stage ('Upload Artifact') {
        steps {
        sh '''
          curl -f -v -u admin:admin --upload-file users.zip http://3.236.187.195:8081/repository/users/users.zip
         
           ''' 
          }
        }
     }
  }
